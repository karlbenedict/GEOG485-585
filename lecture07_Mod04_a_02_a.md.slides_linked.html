<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Karl Benedict">
  <title>Week 7 - Module 4a - Interoperability Standards. WFS &amp; WCS</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="slides.css">
  <link rel="stylesheet" href="slide_specific.css">
</head>
<body>
<section class="title">
  <h1 class="title">Week 7 - Module 4a - Interoperability Standards. WFS &amp; WCS</h1>
  <footer>
    <span class="author">Karl Benedict</span> · <span class="date">GEOG 485L/585L - Spring 2017</span>
  </footer>
</section>
<section class="slide level3">

<!---------------------------------------------------------------------------->
<!-- Week 07 ----------------------------------------------------------------->
<!-- Lecture 04 a 02 a ------------------------------------------------------->
<!-- Interoperability Standards----------------------------------------------->
<!-- WFS and WCS ------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</section>
<section id="overview" class="slide level3 module04a02a">
<h1>Overview</h1>
<ul>
<li>OGC Web Feature Services (WFS)
<ul>
<li>Capabilities and purpose</li>
<li>Overview of the collection of WFS commands</li>
<li>Sample WFS requests</li>
</ul></li>
<li>OGC Web Coverage Services (WCS)
<ul>
<li>Capabilities and purpose</li>
<li>Overview of the collection of WCS commands</li>
<li>Sample WCS requests</li>
</ul></li>
</ul>
</section>
<section id="ogc-web-feature-service-wfs" class="titleslide slide level2 module04a02a"><h1>OGC Web Feature Service (WFS)</h1></section><section id="background" class="slide level3 module04a02a">
<h1>Background</h1>
<p>The documents related to the OGC WFS standard are available from: <a href="http://www.opengeospatial.org/standards/wfs"><code>http://www.opengeospatial.org/standards/wfs</code></a> and all operation parameter tables presented here are based upon the <a href="http://www.opengeospatial.org/standards/wfs">OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02</a></p>
<p>From the Version 2.0.0 WFS Scope Section:</p>
<blockquote>
<p>This International Standard specifies the behaviour of a service that provides transactions on and access to geographic features in a manner independent of the underlying data store. It specifies discovery operations, query operations, locking operations, transaction operations and operations to manage stored parameterized query expressions.</p>
</blockquote>
<blockquote>
<p>Discovery operations allow the service to be interrogated to determine its capabilities and to retrieve the application schema that defines the feature types that the service offers.</p>
</blockquote>
<blockquote>
<p>Query operations allow features or values of feature properties to be retrieved from the underlying data store based upon constraints, defined by the client, on feature properties.</p>
</blockquote>
<blockquote>
<p>Locking operations allow exclusive access to features for the purpose of modifying or deleting features.</p>
</blockquote>
<blockquote>
<p>Transaction operations allow features to be created, changed, replaced and deleted from the underlying data store.</p>
</blockquote>
<blockquote>
<p>Stored query operations allow clients to create, drop, list and described parameterized query expressions that are stored by the server and can be repeatedly invoked using different parameter values.</p>
</blockquote>
</section><section id="wfs-requestsoperations" class="slide level3 module04a02a">
<h1>WFS Requests/Operations</h1>
<p>These request types are submitted as part of the required <code>REQUEST</code> key in a KVP HTTP GET request.</p>
<dl>
<dt><code>GetCapabilities</code></dt>
<dd>service metadata (XML) that documents the types of features supported by the service and the operations supported by each feature type
</dd>
<dt><code>DescribeFeatureType</code></dt>
<dd>metadata (XML) that describes the structure of supported feature types
</dd>
<dt><code>GetPropertyValue</code></dt>
<dd>a request for the value(s) of a specified property for a specified <em>featuretype</em>
</dd>
<dt><code>GetFeature</code> (<code>GetFeatureWithLock</code>)</dt>
<dd>a request for actual features (XML, or other formats) from the service. The request may include both spatial and non-spatial query constraints
</dd>
<dt><code>LockFeature</code></dt>
<dd>Feature locking operation
</dd>
<dt><code>Transaction</code></dt>
<dd>a request to a WFS that may create, update, or delete features
</dd>
<dt><code>CreateStoredQuery</code></dt>
<dd>a request to create a named WFS query that is stored on the server for future reuse
</dd>
<dt><code>DropStoredQuery</code></dt>
<dd>a request to remove a named WFS query that has previously been stored on the server
</dd>
<dt><code>ListStoredQueries</code></dt>
<dd>a request to retrieve a list of named WFS queries that have been stored on the server
</dd>
<dt><code>DescribeStoredQueries</code></dt>
<dd>a request for more detailed information about specific named WFS queries that are stored on the server
</dd>
</dl>
</section><section id="wfs-conformance-levels" class="slide level3 module04a02a">
<h1>WFS Conformance Levels</h1>
<p>WFS 2.0.0 Requests and their corresponding WFS Compliance Levels</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Operation (<code>REQUEST=</code>)</th>
<th style="text-align: center;">V 1.1.0</th>
<th style="text-align: center;">V 2.0.0</th>
<th style="text-align: center;">Simple</th>
<th style="text-align: center;">Basic</th>
<th style="text-align: center;">Transactional</th>
<th style="text-align: center;">Locking</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>GetCapabilities</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>DescribeFeatureType</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ListStoredQueries</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>DescribeStoredQueries</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>GetFeature</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>StoredQuery</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>GetPropertyValue</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Transaction</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>GetFeatureWithLock</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>LockFeature</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>GetGMLObject</code></td>
<td style="text-align: center;"><img src="images/check_gray_small.png" /></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</section><section id="request-composition" class="slide level3 module04a02a">
<h1>Request Composition</h1>
<p>Requests submitted to a WFS may be submitted either via</p>
<dl>
<dt>HTTP GET</dt>
<dd>a request that includes all request parameters within the URL submitted to the service. Request parameters are included in the URL as “key=value” pairs (KVPs)
</dd>
<dt>HTTP POST</dt>
<dd>a request where the URL consists of only the Host and path, with all other request parameters included in the body of the POST document submitted to the service. The request parameters supplied to the server are encoded as XML within the POST document.
</dd>
<dt>SOAP</dt>
<dd>a request submitted as an encapsulated message within a SOAP transaction.
</dd>
</dl>
<p>Servers implementing WFS may support either the HTTP GET, POST, or SOAP request model</p>
<p>Conceptually <em>FeatureType</em> = <em>Layer</em></p>
</section><section id="kvp-for-base-wfs-requests" class="slide level3 module04a02a">
<h1>KVP for Base WFS Requests</h1>
<p>Base request parameters for all HTTP GET KVP requests</p>
<figure>
<img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table04.jpg" alt="Table 4 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /><figcaption>Table 4 from <a href="http://www.opengeospatial.org/standards/wfs">OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02</a></figcaption>
</figure>
<p><code>VERSION</code> is required for all operations <em>except</em> the <code>GetCapabilities</code> request</p>
</section><section id="sample-getcapabilities-requests" class="slide level3 module04a02a">
<h1>Sample GetCapabilities Requests</h1>
<p>Sample request to USGS Framework Layer (Governmental Units) WFS Service advertised by the USGS <a href="http://viewer.nationalmap.gov/tnmaccess/api/servicesForm"><em>TNM Access API page</em></a> <a href="http://viewer.nationalmap.gov/tnmaccess/api/services?">service list</a> - <a href="http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?request=GetCapabilities&amp;service=WFS">Live Link</a></p>
<pre><code>http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?
    request=GetCapabilities&amp;
    service=WFS</code></pre>
<p>Sample request to NM RGIS (NM 2010 Census Block Groups) - <a href="http://gstore.unm.edu/apps/rgis/datasets/715663ba-c1c3-414c-84a7-c671526f8316/services/ogc/wfs?SERVICE=wfs&amp;REQUEST=GetCapabilities&amp;VERSION=1.0.0">Live Link</a></p>
<pre><code>http://gstore.unm.edu/apps/rgis/datasets/715663ba-c1c3-414c-84a7-c671526f8316/services/ogc/wfs?
    SERVICE=wfs&amp;
    REQUEST=GetCapabilities&amp;
    VERSION=1.0.0</code></pre>
</section><section id="kvp-for-describefeaturetype-request" class="slide level3 module04a02a">
<h1>KVP for DescribeFeatureType Request</h1>
<p><code>DescribeFeatureType</code> HTTP GET KVP request</p>
<figure>
<img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table15.jpg" alt="Table 15 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /><figcaption>Table 15 from <a href="http://www.opengeospatial.org/standards/wfs">OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02</a></figcaption>
</figure>
</section><section id="sample-describefeaturetype-requests" class="slide level3 module04a02a">
<h1>Sample DescribeFeatureType Requests</h1>
<p>USGS Framework Layer (Governmental Units) WFS Service linked from the USGS <a href="http://viewer.nationalmap.gov/tnmaccess/api/servicesForm"><em>TNM Access API page</em></a> <a href="http://viewer.nationalmap.gov/tnmaccess/api/services?">service list</a> - <a href="http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?version=1.1.0&amp;request=DescribeFeatureType&amp;service=WFS&amp;typeName=WFS_govunits:State_or_Territory_High-res">Live Link</a></p>
<pre><code>http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?
    version=1.1.0&amp;
    request=DescribeFeatureType&amp;
    service=WFS&amp;
    typeName=WFS_govunits:State_or_Territory_High-res</code></pre>
<p>Sample request to NM RGIS (NM 2010 Census Block Groups) - <a href="http://gstore.unm.edu/apps/rgis/datasets/715663ba-c1c3-414c-84a7-c671526f8316/services/ogc/wfs?SERVICE=wfs&amp;REQUEST=DescribeFeatureType&amp;VERSION=1.0.0&amp;TYPENAME=tl_2010_35_bg10">Live Link</a></p>
<pre><code>http://gstore.unm.edu/apps/rgis/datasets/715663ba-c1c3-414c-84a7-c671526f8316/services/ogc/wfs?
    VERSION=1.0.0&amp;
    SERVICE=wfs&amp;
    REQUEST=DescribeFeatureType&amp;
    TYPENAME=tl_2010_35_bg10</code></pre>
</section><section id="kvp-for-getfeature-request" class="slide level3 module04a02a">
<h1>KVP for GetFeature Request</h1>
<p><code>GetFeature</code> HTTP GET KVP request</p>
<p><img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table17.jpg" alt="Table 17 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /> </p>
</section><section id="kvp-for-getfeature-request---presentation-parameters" class="slide level3 module04a02a">
<h1>KVP for GetFeature Request - Presentation Parameters</h1>
<p><img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table05.jpg" alt="Table 5 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /> </p>
</section><section id="kvp-for-getfeature-request---resolve-parameters" class="slide level3 module04a02a">
<h1>KVP for GetFeature Request - Resolve Parameters</h1>
<p><img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table06.jpg" alt="Table 6 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /> </p>
</section><section id="kvp-for-getfeature-request---ad-hoc-query-parameters-figure" class="slide level3 module04a02a">
<h1>KVP for GetFeature Request - Ad-hoc Query Parameters (Figure )</h1>
<p><img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table08.jpg" alt="Table 8 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /> </p>
</section><section id="kvp-for-getfeature-request---stored-query-parameters-figure" class="slide level3 module04a02a">
<h1>KVP for GetFeature Request - Stored Query Parameters (Figure )</h1>
<p><img src="images/09-025r1_OGC_Web_Feature_Service_WFS_2-table10.jpg" alt="Table 10 from OpenGIS Web Feature Service 2.0 Interface Standard - Panagiotis (Peter) A. Vretanos, editor - 2010-11-02" /> </p>
</section><section id="sample-getfeature-requests" class="slide level3 module04a02a">
<h1>Sample GetFeature Requests</h1>
<p>USGS Framework Layer (Governmental Units) WFS Service linked from the USGS <a href="http://viewer.nationalmap.gov/tnmaccess/api/servicesForm"><em>TNM Access API page</em></a> <a href="http://viewer.nationalmap.gov/tnmaccess/api/services?">service list</a> - <a href="http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?VERSION=1.1.0&amp;REQUEST=GetFeature&amp;SERVICE=WFS&amp;TYPENAME=WFS_govunits:State_or_Territory_High-res">Live Link</a></p>
<p><em>Note:</em> <code>TYPENAME</code> for <code>VERSION=1.1.0</code> instead of <code>TYPENAMES</code> for <code>VERSION=2.0.0</code></p>
<pre><code>http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?
    VERSION=1.1.0&amp;
    REQUEST=GetFeature&amp;
    SERVICE=WFS&amp;
    TYPENAME=WFS_govunits:State_or_Territory_High-res</code></pre>
<p>Alternative request (<a href="http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?VERSION=1.1.0&amp;REQUEST=GetFeature&amp;SERVICE=WFS&amp;TYPENAME=WFS_govunits:State_or_Territory_High-res&amp;OUTPUTFORMAT=text/xml;%20subType=gml/3.1.1/profiles/gmlsf/1.0.0/0">Live Link</a>) that includes an <code>OUTPUTFORMAT</code> parameter</p>
<pre><code>http://services.nationalmap.gov/arcgis/services/WFS/govunits/MapServer/WFSServer?
    VERSION=1.1.0&amp;
    REQUEST=GetFeature&amp;
    SERVICE=WFS&amp;
    TYPENAME=WFS_govunits:State_or_Territory_High-res&amp;
    OUTPUTFORMAT=text/xml;%20subType=gml/3.1.1/profiles/gmlsf/1.0.0/0</code></pre>
</section>
<section id="ogc-web-coverage-services" class="titleslide slide level2 module04a02a"><h1>OGC Web Coverage Services</h1></section><section id="background-1" class="slide level3 module04a02a">
<h1>Background</h1>
<p>The documents related to the OGC WCS standard are available from: [http://www.opengeospatial.org/standards/wcs][wcs] with the sample parameters in the following slides based upon the <a href="http://portal.opengeospatial.org/files/?artifact_id=41439"><em>OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension</em> - Peter Baumann, editor - 2010-10-27</a></p>
<p>From the OGC WCS 2.0 <em>Introduction</em></p>
<blockquote>
<p>The OGC Web Coverage Service (WCS) supports electronic retrieval of geospatial data as &quot;coverages&quot; – that is, digital geospatial information representing space/time-varying phenomena.</p>
</blockquote>
<blockquote>
<p>This document specifies the WCS core; every implementation of a WCS shall adhere to this standard. This standard thus defines only basic requirements. Extensions to the core will define extensions to meet additional requirements, such as the response encoding. Indeed, additional extensions are required in order to completely specify a WCS for implementation.</p>
</blockquote>
<blockquote>
<p>A WCS provides access to coverage data in forms that are useful for client-side rendering, as input into scientific models, and for other clients. The WCS may be compared to the OGC Web Feature Service (WFS) and the Web Map Service (WMS). As WMS and WFS service instances, a WCS allows clients to choose portions of a server's information holdings based on spatial constraints and other query criteria.</p>
</blockquote>
</section><section id="wcs-requestsoperations" class="slide level3 module04a02a">
<h1>WCS Requests/Operations</h1>
<dl>
<dt><code>GetCapabilities</code></dt>
<dd>service metadata (XML) that documents the service, including brief information about the data coverages available from the service
</dd>
<dt><code>DescribeCoverage</code></dt>
<dd>a request for more detailed metadata (XML) for one or more coverages listed in the output of the GetCapabilities request
</dd>
<dt><code>GetCoverage</code></dt>
<dd>a request for an actual data product representing a specified coverage. The specific data formats available for delivery will vary from service to service.
</dd>
</dl>
</section><section id="request-composition-1" class="slide level3 module04a02a">
<h1>Request Composition</h1>
<p>Requests submitted to a WCS may be submitted either via the following protocols, as defined in the three extensions developed thus far for the <em>core</em> WCS standard.</p>
<dl>
<dt>HTTP GET</dt>
<dd>a request that includes all request parameters within the URL submitted to the service. Request parameters are included in the URL as “name=value” pairs. <a href="http://portal.opengeospatial.org/files/?artifact_id=41439">Extension Link</a>
</dd>
<dt>HTTP POST</dt>
<dd>a request where the URL consists of only the Host and path, with all other request parameters included in the body of the POST document submitted to the service. The request parameters supplied to the server are encoded as XML within the POST document. <a href="http://portal.opengeospatial.org/files/?artifact_id=41440">Extension Link</a>
</dd>
<dt>XML/SOAP</dt>
<dd>a request-response model between the client that conforms with the W3C SOAP web services protocol <a href="http://portal.opengeospatial.org/files/?artifact_id=41441">Extension Link</a>
</dd>
</dl>
</section><section id="kvp-for-base-wcs-requests" class="slide level3 module04a02a">
<h1>KVP for Base WCS Requests</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: center;">Mandatory/Optional</th>
<th style="text-align: left;">Definition</th>
<th style="text-align: left;">Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">service</td>
<td style="text-align: center;">M</td>
<td style="text-align: left;">Identifier of the OGC service</td>
<td style="text-align: left;"><code>String</code>, fixed to &quot;WCS&quot;</td>
</tr>
<tr class="even">
<td style="text-align: left;">request</td>
<td style="text-align: center;">M</td>
<td style="text-align: left;">Request type name</td>
<td style="text-align: left;"><code>String</code>, set to operation name</td>
</tr>
<tr class="odd">
<td style="text-align: left;">version</td>
<td style="text-align: center;">M (except for GetCapabilities)</td>
<td style="text-align: left;">Request protocol version</td>
<td style="text-align: left;"><code>String</code></td>
</tr>
</tbody>
</table>
</section><section id="sample-wcs-getcapabilities-requests" class="slide level3 module04a02a">
<h1>Sample WCS <code>GetCapabilities</code> requests</h1>
<p>NOAA Global Forecast System <a href="http://nomads.ncdc.noaa.gov/thredds/catalog/gfs-004/catalog.html">THREDDS catalog</a>. <a href="http://nomads.ncdc.noaa.gov/thredds/wcs/gfs-004/201602/20160228/gfs_4_20160228_0000_384.grb2?service=WCS&amp;version=1.0.0&amp;request=GetCapabilities">Live Link</a></p>
<pre><code>http://nomads.ncdc.noaa.gov/thredds/wcs/gfs-004/201602/20160228/
    gfs_4_20160228_0000_384.grb2?
    service=WCS&amp;
    version=1.0.0&amp;
    request=GetCapabilities </code></pre>
<p>New Mexico Resource Geographic Information System PRISM Precipitation Normals WCS Service. <a href="http://gstore.unm.edu/apps/rgis/datasets/2ce10b57-3925-4971-b876-b6fc66d3cca2/services/ogc/wcs?SERVICE=wcs&amp;REQUEST=GetCapabilities&amp;VERSION=1.1.2">Live Link</a></p>
<pre><code>http://gstore.unm.edu/apps/rgis/datasets/2ce10b57-3925-4971-b876-b6fc66d3cca2/services/ogc/wcs?
    SERVICE=wcs&amp;
    REQUEST=GetCapabilities&amp;
    VERSION=1.1.2</code></pre>
</section><section id="kvp-for-describecoverage-request" class="slide level3 module04a02a">
<h1>KVP for DescribeCoverage Request</h1>
<p><code>DescribeCoverage</code> HTTP GET KVP request (Figure 1)</p>
<figure>
<img src="images/09-147r1_OGC_Web_Coverage_Service_2-table01.jpg" alt="Figure 1. Table 1 from OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension - Peter Baumann, editor - 2010-10-27" id="fig:wcsTable01" /><figcaption>Figure 1. Table 1 from <a href="http://portal.opengeospatial.org/files/?artifact_id=41439"><em>OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension</em> - Peter Baumann, editor - 2010-10-27</a></figcaption>
</figure>
</section><section id="sample-describecoverage-request" class="slide level3 module04a02a">
<h1>Sample DescribeCoverage Request</h1>
<p>NOAA Global Forecast System <a href="http://nomads.ncdc.noaa.gov/thredds/catalog/gfs-004/catalog.html">THREDDS catalog</a>. <a href="http://nomads.ncdc.noaa.gov/thredds/wcs/gfs-004/201602/20160228/gfs_4_20160228_0000_384.grb2?service=WCS&amp;version=1.0.0&amp;request=DescribeCoverage&amp;COVERAGE=Categorical_Rain">Live Link</a></p>
<pre><code>http://nomads.ncdc.noaa.gov/thredds/wcs/gfs-004/201602/20160228/
gfs_4_20160228_0000_384.grb2?
    service=WCS&amp;
    version=1.0.0&amp;
    request=DescribeCoverage&amp;
    COVERAGE=Categorical_Rain </code></pre>
<p>New Mexico Resource Geographic Information System PRISM Precipitation Normals WCS Service. <a href="http://gstore.unm.edu/apps/rgis/datasets/2ce10b57-3925-4971-b876-b6fc66d3cca2/services/ogc/wcs?SERVICE=wcs&amp;REQUEST=DescribeCoverage&amp;VERSION=1.1.2&amp;COVERAGE=us_ppt_1971_2000_11">Live Link</a></p>
<pre><code>http://gstore.unm.edu/apps/rgis/datasets/2ce10b57-3925-4971-b876-b6fc66d3cca2/services/ogc/wcs?
    SERVICE=wcs&amp;
    REQUEST=DescribeCoverage&amp;
    VERSION=1.1.2&amp;
    COVERAGE=us_ppt_1971_2000_11</code></pre>
</section><section id="kvp-for-getcoverage-request" class="slide level3 module04a02a">
<h1>KVP for GetCoverage Request</h1>
<p><code>GetCoverage</code> HTTP GET KVP request (Figure 1)</p>
<figure>
<img src="images/09-147r1_OGC_Web_Coverage_Service_2-table02.jpg" alt="Table 2 from OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension - Peter Baumann, editor - 2010-10-27" /><figcaption>Table 2 from <a href="http://portal.opengeospatial.org/files/?artifact_id=41439"><em>OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension</em> - Peter Baumann, editor - 2010-10-27</a></figcaption>
</figure>
</section><section id="subset-definition-for-getcoverage-request" class="slide level3 module04a02a">
<h1>Subset Definition for GetCoverage Request</h1>
<p>Subset definition for the <code>GetCoverage</code> HTTP GET KVP request</p>
<figure>
<img src="images/09-147r1_OGC_Web_Coverage_Service_2-requirement07.jpg" alt="Requirement 7 from OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension - Peter Baumann, editor - 2010-10-27" /><figcaption>Requirement 7 from <a href="http://portal.opengeospatial.org/files/?artifact_id=41439"><em>OGC Web Coverage Service 2.0 Interface Standard - KVP Protocol Binding Extension</em> - Peter Baumann, editor - 2010-10-27</a></figcaption>
</figure>
<p>Example from the 2.0 specification:</p>
<pre><code>http://www.myserver.org:port/path?
    service=WCS
    &amp;version=2.0
    &amp;request=GetCoverage
    &amp;coverageId=C0002
    &amp;subset=lon,http://www.opengis.net/def/crs/EPSG/0/4326(-71,47)
    &amp;subset=lat,http://www.opengis.net/def/crs/EPSG/0/4326(-66,51)
    &amp;subset=t,http://www.opengis.net/def/trs/ISO- 8601/0/Gregorian+UTC(&quot;2009-11-06T23:20:52Z&quot;)</code></pre>
</section><section id="sample-getcoverage-request" class="slide level3 module04a02a">
<h1>Sample GetCoverage Request</h1>
<p>New Mexico Resource Geographic Information System PRISM Precipitation Normals WCS Service. <a href="http://gstore.unm.edu/apps/rgis/datasets/2ce10b57-3925-4971-b876-b6fc66d3cca2/services/ogc/wcs?SERVICE=wcs&amp;REQUEST=GetCoverage&amp;VERSION=1.1.2&amp;COVERAGE=us_ppt_1971_2000_11&amp;CRS=urn:ogc:def:crs:EPSG::4326&amp;BBOX=24.0625,-125.02083333333,49.93749998965,-66.47916669008&amp;FORMAT=image/tiff&amp;WIDTH=2048&amp;HEIGHT=905">Live Link</a></p>
<pre><code>http://gstore.unm.edu/apps/rgis/datasets/2ce10b57-3925-4971-b876-b6fc66d3cca2/services/ogc/wcs?
    SERVICE=wcs&amp;
    REQUEST=GetCoverage&amp;
    VERSION=1.1.2&amp;
    COVERAGE=us_ppt_1971_2000_11&amp;
    CRS=urn:ogc:def:crs:EPSG::4326&amp;
    BBOX=24.0625,-125.02083333333,49.93749998965,-66.47916669008&amp;
    FORMAT=image/tiff&amp;
    WIDTH=2048&amp;
    HEIGHT=905</code></pre>
</section>
<hr />
<section>
<div class="license">
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Karl Benedict</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
</div>
</section>
<!-- {{{{ dzslides core
#
#
#     __  __  __       .  __   ___  __
#    |  \  / /__` |    | |  \ |__  /__`
#    |__/ /_ .__/ |___ | |__/ |___ .__/ core :€
#
#
# The following block of code is not supposed to be edited.
# But if you want to change the behavior of these slides,
# feel free to hack it!
#
-->

<div id="progress-bar"></div>

<!-- Default Style -->
<style>
  * { margin: 0; padding: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
  [role="note"] { display: none; }
  body {
    width: 800px; height: 600px;
    margin-left: -400px; margin-top: -300px;
    position: absolute; top: 50%; left: 50%;
    overflow: hidden;
    display: none;
  }
  .view body {
    position: static;
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    display: inline-block;
    overflow: visible; overflow-x: hidden;
    /* undo Dz.onresize */
    transform: none !important;
    -moz-transform: none !important;
    -webkit-transform: none !important;
    -o-transform: none !important;
    -ms-transform: none !important;
  }
  .view head, .view head > title { display: block }
  section {
    position: absolute;
    pointer-events: none;
    width: 100%; height: 100%;
  }
  .view section {
    pointer-events: auto;
    position: static;
    width: 800px; height: 600px;
    margin: -150px -200px;
    float: left;

    transform: scale(.4);
    -moz-transform: scale(.4);
    -webkit-transform: scale(.4);
    -o-transform: scale(.4);
    -ms-transform: scale(.4);
  }
  .view section > * { pointer-events: none; }
  section[aria-selected] { pointer-events: auto; }
  html { overflow: hidden; }
  html.view { overflow: visible; }
  body.loaded { display: block; }
  .incremental {visibility: hidden; }
  .incremental[active] {visibility: visible; }
  #progress-bar{
    bottom: 0;
    position: absolute;
    -moz-transition: width 400ms linear 0s;
    -webkit-transition: width 400ms linear 0s;
    -ms-transition: width 400ms linear 0s;
    transition: width 400ms linear 0s;
  }
  .view #progress-bar {
    display: none;
  }
</style>

<script>
  var Dz = {
    remoteWindows: [],
    idx: -1,
    step: 0,
    html: null,
    slides: null,
    progressBar : null,
    params: {
      autoplay: "1"
    }
  };

  Dz.init = function() {
    document.body.className = "loaded";
    this.slides = Array.prototype.slice.call($$("body > section"));
    this.progressBar = $("#progress-bar");
    this.html = document.body.parentNode;
    this.setupParams();
    this.onhashchange();
    this.setupTouchEvents();
    this.onresize();
    this.setupView();
  }

  Dz.setupParams = function() {
    var p = window.location.search.substr(1).split('&');
    p.forEach(function(e, i, a) {
      var keyVal = e.split('=');
      Dz.params[keyVal[0]] = decodeURIComponent(keyVal[1]);
    });
  // Specific params handling
    if (!+this.params.autoplay)
      $$.forEach($$("video"), function(v){ v.controls = true });
  }

  Dz.onkeydown = function(aEvent) {
    // Don't intercept keyboard shortcuts
    if (aEvent.altKey
      || aEvent.ctrlKey
      || aEvent.metaKey
      || aEvent.shiftKey) {
      return;
    }
    if ( aEvent.keyCode == 37 // left arrow
      || aEvent.keyCode == 38 // up arrow
      || aEvent.keyCode == 33 // page up
    ) {
      aEvent.preventDefault();
      this.back();
    }
    if ( aEvent.keyCode == 39 // right arrow
      || aEvent.keyCode == 40 // down arrow
      || aEvent.keyCode == 34 // page down
    ) {
      aEvent.preventDefault();
      this.forward();
    }
    if (aEvent.keyCode == 35) { // end
      aEvent.preventDefault();
      this.goEnd();
    }
    if (aEvent.keyCode == 36) { // home
      aEvent.preventDefault();
      this.goStart();
    }
    if (aEvent.keyCode == 32) { // space
      aEvent.preventDefault();
      this.toggleContent();
    }
    if (aEvent.keyCode == 70) { // f
      aEvent.preventDefault();
      this.goFullscreen();
    }
    if (aEvent.keyCode == 79) { // o
      aEvent.preventDefault();
      this.toggleView();
    }
  }

  /* Touch Events */

  Dz.setupTouchEvents = function() {
    var orgX, newX;
    var tracking = false;

    var db = document.body;
    db.addEventListener("touchstart", start.bind(this), false);
    db.addEventListener("touchmove", move.bind(this), false);

    function start(aEvent) {
      aEvent.preventDefault();
      tracking = true;
      orgX = aEvent.changedTouches[0].pageX;
    }

    function move(aEvent) {
      if (!tracking) return;
      newX = aEvent.changedTouches[0].pageX;
      if (orgX - newX > 100) {
        tracking = false;
        this.forward();
      } else {
        if (orgX - newX < -100) {
          tracking = false;
          this.back();
        }
      }
    }
  }

  Dz.setupView = function() {
    document.body.addEventListener("click", function ( e ) {
      if (!Dz.html.classList.contains("view")) return;
      if (!e.target || e.target.nodeName != "SECTION") return;

      Dz.html.classList.remove("view");
      Dz.setCursor(Dz.slides.indexOf(e.target) + 1);
    }, false);
  }

  /* Adapt the size of the slides to the window */

  Dz.onresize = function() {
    var db = document.body;
    var sx = db.clientWidth / window.innerWidth;
    var sy = db.clientHeight / window.innerHeight;
    var transform = "scale(" + (1/Math.max(sx, sy)) + ")";

    db.style.MozTransform = transform;
    db.style.WebkitTransform = transform;
    db.style.OTransform = transform;
    db.style.msTransform = transform;
    db.style.transform = transform;
  }


  Dz.getNotes = function(aIdx) {
    var s = $("section:nth-of-type(" + aIdx + ")");
    var d = s.$("[role='note']");
    return d ? d.innerHTML : "";
  }

  Dz.onmessage = function(aEvent) {
    var argv = aEvent.data.split(" "), argc = argv.length;
    argv.forEach(function(e, i, a) { a[i] = decodeURIComponent(e) });
    var win = aEvent.source;
    if (argv[0] === "REGISTER" && argc === 1) {
      this.remoteWindows.push(win);
      this.postMsg(win, "REGISTERED", document.title, this.slides.length);
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
      return;
    }
    if (argv[0] === "BACK" && argc === 1)
      this.back();
    if (argv[0] === "FORWARD" && argc === 1)
      this.forward();
    if (argv[0] === "START" && argc === 1)
      this.goStart();
    if (argv[0] === "END" && argc === 1)
      this.goEnd();
    if (argv[0] === "TOGGLE_CONTENT" && argc === 1)
      this.toggleContent();
    if (argv[0] === "SET_CURSOR" && argc === 2)
      window.location.hash = "#" + argv[1];
    if (argv[0] === "GET_CURSOR" && argc === 1)
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
    if (argv[0] === "GET_NOTES" && argc === 1)
      this.postMsg(win, "NOTES", this.getNotes(this.idx));
  }

  Dz.toggleContent = function() {
    // If a Video is present in this new slide, play it.
    // If a Video is present in the previous slide, stop it.
    var s = $("section[aria-selected]");
    if (s) {
      var video = s.$("video");
      if (video) {
        if (video.ended || video.paused) {
          video.play();
        } else {
          video.pause();
        }
      }
    }
  }

  Dz.setCursor = function(aIdx, aStep) {
    // If the user change the slide number in the URL bar, jump
    // to this slide.
    aStep = (aStep != 0 && typeof aStep !== "undefined") ? "." + aStep : ".0";
    window.location.hash = "#" + aIdx + aStep;
  }

  Dz.onhashchange = function() {
    var cursor = window.location.hash.split("#"),
        newidx = 1,
        newstep = 0;
    if (cursor.length == 2) {
      newidx = ~~cursor[1].split(".")[0];
      newstep = ~~cursor[1].split(".")[1];
      if (newstep > Dz.slides[newidx - 1].$$('.incremental > *').length) {
        newstep = 0;
        newidx++;
      }
    }
    this.setProgress(newidx, newstep);
    if (newidx != this.idx) {
      this.setSlide(newidx);
    }
    if (newstep != this.step) {
      this.setIncremental(newstep);
    }
    for (var i = 0; i < this.remoteWindows.length; i++) {
      this.postMsg(this.remoteWindows[i], "CURSOR", this.idx + "." + this.step);
    }
  }

  Dz.back = function() {
    if (this.idx == 1 && this.step == 0) {
      return;
    }
    if (this.step == 0) {
      this.setCursor(this.idx - 1,
                     this.slides[this.idx - 2].$$('.incremental > *').length);
    } else {
      this.setCursor(this.idx, this.step - 1);
    }
  }

  Dz.forward = function() {
    if (this.idx >= this.slides.length &&
        this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
        return;
    }
    if (this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
      this.setCursor(this.idx + 1, 0);
    } else {
      this.setCursor(this.idx, this.step + 1);
    }
  }

  Dz.goStart = function() {
    this.setCursor(1, 0);
  }

  Dz.goEnd = function() {
    var lastIdx = this.slides.length;
    var lastStep = this.slides[lastIdx - 1].$$('.incremental > *').length;
    this.setCursor(lastIdx, lastStep);
  }

  Dz.toggleView = function() {
    this.html.classList.toggle("view");

    if (this.html.classList.contains("view")) {
      $("section[aria-selected]").scrollIntoView(true);
    }
  }

  Dz.setSlide = function(aIdx) {
    this.idx = aIdx;
    var old = $("section[aria-selected]");
    var next = $("section:nth-of-type("+ this.idx +")");
    if (old) {
      old.removeAttribute("aria-selected");
      var video = old.$("video");
      if (video) {
        video.pause();
      }
    }
    if (next) {
      next.setAttribute("aria-selected", "true");
      if (this.html.classList.contains("view")) {
        next.scrollIntoView();
      }
      var video = next.$("video");
      if (video && !!+this.params.autoplay) {
        video.play();
      }
    } else {
      // That should not happen
      this.idx = -1;
      // console.warn("Slide doesn't exist.");
    }
  }

  Dz.setIncremental = function(aStep) {
    this.step = aStep;
    var old = this.slides[this.idx - 1].$('.incremental > *[aria-selected]');
    if (old) {
      old.removeAttribute('aria-selected');
    }
    var incrementals = $$('.incremental');
    if (this.step <= 0) {
      $$.forEach(incrementals, function(aNode) {
        aNode.removeAttribute('active');
      });
      return;
    }
    var next = this.slides[this.idx - 1].$$('.incremental > *')[this.step - 1];
    if (next) {
      next.setAttribute('aria-selected', true);
      next.parentNode.setAttribute('active', true);
      var found = false;
      $$.forEach(incrementals, function(aNode) {
        if (aNode != next.parentNode)
          if (found)
            aNode.removeAttribute('active');
          else
            aNode.setAttribute('active', true);
        else
          found = true;
      });
    } else {
      setCursor(this.idx, 0);
    }
    return next;
  }

  Dz.goFullscreen = function() {
    var html = $('html'),
        requestFullscreen = html.requestFullscreen || html.requestFullScreen || html.mozRequestFullScreen || html.webkitRequestFullScreen;
    if (requestFullscreen) {
      requestFullscreen.apply(html);
    }
  }
  
  Dz.setProgress = function(aIdx, aStep) {
    var slide = $("section:nth-of-type("+ aIdx +")");
    if (!slide)
      return;
    var steps = slide.$$('.incremental > *').length + 1,
        slideSize = 100 / (this.slides.length - 1),
        stepSize = slideSize / steps;
    this.progressBar.style.width = ((aIdx - 1) * slideSize + aStep * stepSize) + '%';
  }
  
  Dz.postMsg = function(aWin, aMsg) { // [arg0, [arg1...]]
    aMsg = [aMsg];
    for (var i = 2; i < arguments.length; i++)
      aMsg.push(encodeURIComponent(arguments[i]));
    aWin.postMessage(aMsg.join(" "), "*");
  }
  
  function init() {
    Dz.init();
    window.onkeydown = Dz.onkeydown.bind(Dz);
    window.onresize = Dz.onresize.bind(Dz);
    window.onhashchange = Dz.onhashchange.bind(Dz);
    window.onmessage = Dz.onmessage.bind(Dz);
  }

  window.onload = init;
</script>


<script> // Helpers
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {

      // closest thing possible to the ECMAScript 5 internal IsCallable
      // function 
      if (typeof this !== "function")
      throw new TypeError(
        "Function.prototype.bind - what is trying to be fBound is not callable"
      );

      var aArgs = Array.prototype.slice.call(arguments, 1),
          fToBind = this,
          fNOP = function () {},
          fBound = function () {
            return fToBind.apply( this instanceof fNOP ? this : oThis || window,
                   aArgs.concat(Array.prototype.slice.call(arguments)));
          };

      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();

      return fBound;
    };
  }

  var $ = (HTMLElement.prototype.$ = function(aQuery) {
    return this.querySelector(aQuery);
  }).bind(document);

  var $$ = (HTMLElement.prototype.$$ = function(aQuery) {
    return this.querySelectorAll(aQuery);
  }).bind(document);

  $$.forEach = function(nodeList, fun) {
    Array.prototype.forEach.call(nodeList, fun);
  }

</script>
<!-- vim: set fdm=marker: }}} -->
</body>
</html>
